<% spring_subjects = @subjects.where(term: 0) %>
<% autumn_subjects = @subjects.where(term: 1) %>

<%= render partial: 'term-info', locals: {weeks: @weeks, periods: @periods, term: 0, subjects: spring_subjects} %>
<%= render partial: 'term-info', locals: {weeks: @weeks, periods: @periods, term: 1, subjects: autumn_subjects} %>

<div class="delete-all-stock">
  <%= link_to 'すべて削除する', clear_stock_subjects_path, method: :delete, class: "btn btn-default", data: { confirm: '本当によろしいですか？'} %>
</div>

<!-- 時間割に科目を追加する  -->
<script>
  <% @schedules.each do |k,v| %>
    <% id, week, periods = k, v[0], v[1] %>
    <% subject = @subjects.find_by(subject_id: id) %>
    <% periods.each do |period| %>
      var class_id = "schedule-data-<%= id %>";
      var subject_name = '●<%= subject.name %>';
      schedule_table_add(class_id, subject_name, <%= week %>, <%= period %>, <%= subject.term %>);
    <% end %>
  <% end %>
</script>
